{"version":3,"file":"task-list-4df162d5.js","sources":["../../../src/routes/task-list.tsx"],"sourcesContent":["import { Show, createSignal, For } from \"solid-js\";\nimport InputWithCopy from \"~/components/InputWithCopy\";\n\nexport default function TaskList() {\n  const [content, setContent] = createSignal(\"\");\n  const [match, setMatch] = createSignal(`(TE-\\\\d{4})`);\n  const [highlightedLine, setHighlightedLine] = createSignal();\n  const [regexError, setRegexError] = createSignal<string>();\n\n  const result = () => {\n    setRegexError(undefined);\n\n    try {\n      return content()\n        .split(\"\\n\")\n        .map((line) => {\n          const regexp = new RegExp(match(), \"g\");\n          const array = [...line.matchAll(regexp)];\n\n          return array.map((match) => match?.[1]);\n        });\n    } catch (error) {\n      setRegexError((error as Error).message);\n      return [];\n    }\n  };\n\n  const details = () => {\n    const existing = new Map<string, number>();\n\n    return result().map((result, i) => {\n      const details = [\n        result.length > 1 ? `(${result.length})` : null,\n        result.length === 0 ? `âš ï¸` : null,\n        result.map((task) => existing.has(task)).filter((v) => v).length > 0\n          ? {\n              value: `ðŸ‘¥`,\n              class: \"cursor-pointer\",\n              onMouseOver: () =>\n                setHighlightedLine(\n                  existing.get(result.find((task) => existing.has(task))!)! + 1\n                ),\n              onMouseOut: () => setHighlightedLine(undefined),\n            }\n          : null,\n      ];\n\n      result.forEach((task) => !existing.has(task) && existing.set(task, i));\n\n      return details.filter((v) => v);\n    });\n  };\n\n  const unique = (tasks: string[]) => Array.from(new Set(tasks));\n\n  return (\n    <main class=\"text-center mx-auto text-gray-700 p-4\">\n      <div classList={{ \"text-red-600\": !!regexError() }}>\n        <input\n          type=\"text\"\n          class=\"text-center font-sans text-4xl focus:outline-none p-5 leading-none\t\"\n          value={match()}\n          onChange={(event) => setMatch(event.target.value)}\n        />\n        <Show when={regexError()}>\n          <p class=\"mb-8\">{regexError()}</p>\n        </Show>\n      </div>\n      <div class=\"outline-1 flex relative\">\n        <pre class=\"w-10 flex-[0_0_2.5rem] py-5 bg-gray-300\">\n          <For each={details()}>\n            {(line) => (\n              <>\n                <For each={line}>\n                  {(content) => {\n                    if (typeof content === \"string\") {\n                      return `${content}`;\n                    }\n\n                    const { value, ...rest } = content!;\n\n                    return <span {...rest}>{value}</span>;\n                  }}\n                </For>\n                {`\\n`}\n              </>\n            )}\n          </For>\n        </pre>\n\n        <textarea\n          class=\"w-full border resize-none font-sans p-5 focus:outline-none overflow-y-clip whitespace-nowrap \"\n          rows={content().split(\"\\n\").length}\n          onInput={(event) => setContent(event.target.value)}\n        ></textarea>\n        <Show when={highlightedLine()}>\n          <div class={`w-full absolute pointer-events-none pt-5`}>\n            <For each={Array((highlightedLine() as number) - 1)}>\n              {() => <br />}\n            </For>\n            <div class={`min-h-[1.5em] bg-yellow-500 bg-opacity-50`}>{``}</div>\n          </div>\n        </Show>\n      </div>\n      <Show when={result().flat().length > 0}>\n        <div class=\"my-10\">\n          <fieldset>\n            <legend>List</legend>\n\n            <InputWithCopy\n              readOnly={true}\n              value={unique(result().flat()).join(\" \")}\n            />\n          </fieldset>\n\n          <fieldset>\n            <legend>JQL</legend>\n            <textarea\n              readOnly={true}\n              class=\"w-full border resize-none font-sans p-5 pl-10 focus:outline-none\"\n              onInput={(event) => setContent(event.target.value)}\n            >\n              {`project = \"TE\" AND key in (${unique(result().flat()).join(\n                \", \"\n              )}) ORDER BY created DESC`}\n            </textarea>\n          </fieldset>\n        </div>\n      </Show>\n    </main>\n  );\n}\n"],"names":["TaskList","content","setContent","createSignal","match","setMatch","highlightedLine","setHighlightedLine","regexError","setRegexError","result","undefined","split","map","line","regexp","RegExp","matchAll","error","message","details","existing","Map","i","length","task","has","filter","v","value","class","onMouseOver","get","find","onMouseOut","forEach","set","unique","tasks","Array","from","Set","_el$","_tmpl$4","_el$2","firstChild","_el$3","_el$5","nextSibling","_el$6","_el$7","addEventListener","event","target","_$insert","_$createComponent","Show","when","children","_el$4","_tmpl$","For","each","rest","_el$16","_tmpl$5","_$spread","$$input","_el$8","_tmpl$2","_el$9","_tmpl$6","flat","_el$10","_tmpl$3","_el$11","_el$13","_el$14","_el$15","InputWithCopy","readOnly","join","_$effect","_p$","_v$","_v$2","classList","toggle","_$setAttribute","_$delegateEvents"],"mappings":"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"}